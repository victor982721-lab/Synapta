<!-- Ventana para administrar categorías y extensiones de archivo -->
<Window
    x:Class="Ws_Insights.File_Extensions.ExtensionManagerWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Extensiones disponibles"
    Height="620"
    Width="760"
    Background="{DynamicResource WindowBackgroundBrush}"
    Foreground="{DynamicResource TextBrush}"
    WindowStartupLocation="CenterOwner"
    ResizeMode="CanResizeWithGrip">

    <!-- Contenedor principal -->
    <Grid Margin="18">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Encabezado de la ventana -->
        <StackPanel>
            <TextBlock Text="Selecciona las extensiones que deseas analizar"
                       FontSize="20"
                       FontWeight="SemiBold" />

            <TextBlock Text="Activa categorías completas o ajusta cada extensión individual"
                       Foreground="{DynamicResource TextMutedBrush}"
                       Margin="0,4,0,0" />
        </StackPanel>

        <!-- Sección scrollable con categorías -->
        <ScrollViewer Grid.Row="1"
                      VerticalScrollBarVisibility="Auto">
            <ItemsControl ItemsSource="{Binding Categories}"
                          Margin="0,6,0,0">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>

                        <!-- Tarjeta de categoría -->
                        <Border Background="{DynamicResource PanelBrush}"
                                Padding="12"
                                Margin="0,0,0,12"
                                CornerRadius="8"
                                BorderBrush="{DynamicResource BorderBrush}"
                                BorderThickness="1">

                            <StackPanel>
                                <!-- Encabezado de categoría -->
                                <DockPanel>
                                    <CheckBox Content="{Binding Name}"
                                              FontSize="16"
                                              FontWeight="SemiBold"
                                              IsChecked="{Binding CategoryState, Mode=TwoWay}"
                                              IsThreeState="True"
                                              ToolTip="Activa o desactiva todas las extensiones de la categoría" />

                                    <TextBlock Text="{Binding Description}"
                                               DockPanel.Dock="Right"
                                               Foreground="{DynamicResource TextMutedBrush}"
                                               TextWrapping="Wrap" />
                                </DockPanel>

                                <!-- Lista de extensiones -->
                                <ItemsControl ItemsSource="{Binding Options}"
                                              Margin="0,10,0,0">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>

                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <CheckBox Content="{Binding Display}"
                                                      IsChecked="{Binding IsChecked, Mode=TwoWay}"
                                                      Margin="0,4,12,4" />
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </Border>

                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- Botones inferiores -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right">
            <Button Content="Seleccionar todo"
                    Click="OnSelectAll"
                    Margin="0,0,10,0" />

            <Button Content="Limpiar"
                    Click="OnClearAll"
                    Margin="0,0,10,0" />

            <Button Content="Cancelar"
                    Click="OnCancel"
                    Margin="0,0,10,0" />

            <Button Content="Aceptar"
                    Click="OnAccept"
                    Background="{DynamicResource AccentBrush}"
                    Foreground="White" />
        </StackPanel>
    </Grid>
</Window>

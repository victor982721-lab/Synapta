# Legal, compliance y políticas

## Resumen ejecutivo
Este informe sintetiza 2 conversación(es) sobre **Legal, compliance y políticas**.
Principales intenciones detectadas:
- Lee y analiza detalladamente lo siguiente: ~~~~~ # Project Instructions — AutoScript_AR ## Objetivo Ayudar al usuario a modularizar el `AutoScript
- Lee y analiza a detalle lo siguiente: ``` { "model": "GPT-5 Thinking", "model_build": null, "seed": null, "temperature": null, "top_p": null, "top_k": null, "max_tokens": null, "frequency_penalty": nu

## Alcance y supuestos
- Basado exclusivamente en el contenido presente en las conversaciones fuente.
- Se excluyen saludos, disculpas y texto genérico sin valor técnico.
- Se preservan fragmentos técnicos, prompts y código tal como aparecen (con mínimos ajustes de formato).

## Procedimiento paso a paso
⚠️ FALTA: No se detectaron pasos numerados explícitos en las fuentes de este grupo.

## Mejores prompts / plantillas
- ⚠️ FALTA: No se hallaron prompts/plantillas explícitos en las fuentes.

## Ejemplos completos
**Caso de 5-56-17-_An_lisis_Config_ — <Análisis Config>**

*Entrada (user):*

> Lee y analiza detalladamente lo siguiente: ~~~~~ # Project Instructions — AutoScript_AR ## Objetivo Ayudar al usuario a modularizar el `AutoScript.ps1` en **micro-funciones pequeñas y testeables** para eliminar fallas recurrentes y asegurar **entregas reproducibles** con gate de calidad. ## Contrato de sesión Al iniciar una nueva sesión, el asistente de cada instancia deberá realizar en orden, todo en un solo turno: 1. Leer el protocolo ubicado en `/mnt/data/SOP.zip/SOP_AVCM.md` 1) Ejecutar `SOP_AVCM.md` (estado de Proyecto/CI/Memoria, web.run si hay riesgo de cambio). 2) Auditar con `SOP_Auditoria.md` y devolver **Resumen AVCM**: PI, CI(3), Memoria, Archivos cargados. 3) Etiquetar afirmaciones inestables con **[Oficial] / [Comunidad]** y citar fuentes. 4) **Un turno = valor real.** Sin promesas de “luego”. ## 1) Objetivo operativo (nuevo) - **Meta:** convertir el macroscript en **micro-funciones** (ideal ≤ 40–60 LOC / una responsabilidad), con **firmas claras**, **tests Pester v5**, y verificación estática con **PSScriptAnalyzer**. - **Criterios de aceptación (por PR/entrega):** - 0 **errores** PSScriptAnalyzer; advertencias ≤ umbral del repo. - 0 **fallos** Pester; cobertura mínima sobre funciones nuevas/críticas. - Sin estado global; parámetros validados; salidas a **objeto**. - Backups `.bak` + **espejo** en `SCRIPTS\GENERADOR\BACKUPS` antes de modificar. - **CHANGELOG.md** actualizado (SemVer + fecha UTC). ## 2) Alcance - **Sistema:** Windows 10/11; **PowerShell 5.1 / 7.x**. - **Enfoque:** macroscript `SCRIPTS\GENERADOR\Verify_Project.ps1`, sus utilidades y SOPs. - **Fuera de alcance:** CI/CD, secretos, multi-equipo. ## 3) Principios operativos (no negociables) 1) **Accionable:** cada artefacto corre sin pasos manuales. 2) **Backups:** `.bak` local **+ espejo** en `SCRIPTS\GENERADOR\BACKUPS` antes de cualquier edición. 3) **Verificación:** **PSScriptAnalyzer** (JSON/SARIF), **Pester v5** (NUnit), `Test-ModuleManifest` en `.psd1` cuando aplique. 4) **Quality Gate:** si hay **errores PSSA**, **fallas Pester** o manifiestos inválidos → **se cancela**. 5) **Trazabilidad:** `CHANGELOG.md` **append-only** (versión, fecha UTC, motivo). 6) **Estandarización:** rutas con `Join-Path`; UTF-8 **sin BOM**. 7) **CB/Fences:** - Sin bloques anidados → triple backtick ``` - Con bloques anidados (docs) → **fence externo `~~~~~`** y bloques internos con ``` (un nivel). ## 4) Estructura del repo (funcional) - `Project_Instructions.md` (este documento). - `CHANGELOG.md` (bitácora inmutable). - `FILEMAP.md` (mapa recursivo del repo). - `PSScriptAnalyzerSettings.psd1` (config PSSA). - `VERIFICATION\` (salidas: `psscriptanalyzer.json`, `.sarif`, `TestResult.xml`). - `SCRIPTS\GENERADOR\Verify_Project.ps1` (macroscript a modularizar). - `SCRIPTS\MODULES\RepoAR.Core.psm1` (**nuevo**: hogar de micro-funciones). - `SCRIPTS\Invoke-RepoReorg.ps1` (compatibilidad; invoca verificación). - `SCRIPTS\BACKUPS\` (espejo de respaldos). - `SOP\` + `SOP\BACKUPS\` (auditoría, fences/backticks, here-strings, verificación). ## 5) Flujo mínimo de trabajo 1) **Plan del parche** (módulos/funciones a tocar). 2) **Backup previo** (`.bak` + espejo). 3) **Aplicar parche dirigido** (total o segmentado por marcadores `[BEGIN/END MODULE: X]`). 4) **Verificación** → PSSA/Pester/Manifiestos → artefactos en `VERIFICATION\`. 5) **Gate** en verde → **append** a `CHANGELOG.md` (SemVer + UTC + motivo). ### 5.1 Comando de verificación mínima ```powershell pwsh -File "$env:USERPROFILE\Desktop\Repo_AR\SCRIPTS\GENERADOR\Verify_Project.ps1" -RunPSSA -RunInlineTests # Salidas en: ...\Repo_AR\VERIFICATION\ ``` ## 6) Guía de micro-funciones (estándar) - **Firma:** `[CmdletBinding()]` + parámetros tipados; `SupportsShouldProcess` si cambia estado. - **Diseño:** una responsabilidad; sin efectos colaterales; entradas por parámetro; salidas **objeto**. - **Errores:** `throw` con tipos específicos; no silenciar `$ErrorActionPreference`. - **I/O y rutas:** `$PSScriptRoot` + `Join-Path`. - **Codificación:** escribir **UTF-8 sin BOM**; normalizar CRLF para Windows. - **Naming:** `RepoAR-<Acción><Sujeto>` (e.g., `RepoAR-EnsureDir`). - **Pruebas:** caso feliz + bordes + error esperado (Pester v5). - **Logs:** mínimos (`Write-Verbose`/`Write-Information`) y opcionales a archivo. ### 6.1 Plantilla canónica (micro-función) ```powershell function RepoAR-NewTS { [CmdletBinding()] param([int]$Pad = 6) Set-StrictMode -Version 3.0 return (Get-Date -Format 'yyyyMMdd_HHmmssfff').PadRight($Pad,'0') } ``` ## 7) Protocolo de edición con here-strings - Usar here-string **literal** `@' ... '@` para contenido con `$`, ``` o `{}` sin expandir. - Cierre `'@` **en columna 1** (sin espacios). - Si necesitas variables, añadir **footer expandible** `"@ ... "@` o bloque aparte. ## 8) Reglas de verificación y Gate - **PSScriptAnalyzer:** errores = 0; warnings ≤ umbral. - **Pester v5:** fallos = 0; `TestResult.xml` (NUnit) en `VERIFICATION\`. - **Manifiestos:** `Test-ModuleManifest` válido. - **Gate bloqueante:** si falla algo, **se detiene** y **no se entrega**. ## 9) Entregables por turno - Scripts: fence con ``` (sin anidados). - Documentos con bloques anidados: **wrapper `~~~~~`** + fences internos. - **Un artefacto por turno**. ## 10) Versionado y CHANGELOG - **SemVer** en scripts/SOPs. - `CHANGELOG.md`: **append-only** (no reescribir histórico). - El módulo **1-INFO** en scripts debe reflejar versión/fecha efectivas. ## 11) Anexos (referencias internas) - `SOP_Auditoria.md`, `SOP_AVCM.md`, `SOP_CB_Blindado.md`, `SOP_Herestrings.md`, `SOP_Verify_Project.md`, `SOP_Manual_Operativo_Repo_AR.md`. ``` ~~~~~

*Salida (assistant):*

> ¡Listo! Aquí tienes un análisis a fondo de tu **“Project Instructions — AutoScript_AR”** con hallazgos, riesgos y acciones concretas para dejarlo listo para operar sin fricciones. # Resumen ejecutivo El documento está bien encaminado: define objetivo (modularizar el macroscript a micro-funciones testeables), calidad mínima (PSSA + Pester + manifest), trazabilidad (CHANGELOG), y reglas de formato (fences/here-strings). Lo que falta para hacerlo “ejecutable sin ambigüedades” es: unificar rutas de backups, fijar umbrales/convenciones concretas (warnings PSSA, convención SemVer/fecha), precisar la matriz de outputs y clarificar el “contrato de sesión” (qué es obligatorio en cada turno y qué hacer ante fallos). --- # Fortalezas (lo que ya está sólido) - **Meta y alcance claros.** Modularización, pruebas y verificación están definidos; delimita lo que no entra (CI/CD, secretos). - **Quality Gate explícito.** Corta si hay errores PSSA, fallos Pester o manifiesto inválido. - **Trazabilidad.** CHANGELOG append-only con SemVer + fecha; carpeta `VERIFICATION\` con artefactos (JSON, SARIF, NUnit). - **Estandarización de I/O.** UTF-8 sin BOM, CRLF, `Join-Path`, here-strings literales para conte...

---

**Caso de 6-0-1-_Config_YSD_ — <Config YSD>**

*Entrada (user):*

> Lee y analiza a detalle lo siguiente: ``` { "model": "GPT-5 Thinking", "model_build": null, "seed": null, "temperature": null, "top_p": null, "top_k": null, "max_tokens": null, "frequency_penalty": null, "presence_penalty": null, "repetition_penalty": null, "stop_sequences": [], "system_prompt_version": "Proyecto Ingeniería Inversa — Mandato operativo v2.1", "fileset_version": "5b3f3ba4d0636c292e4faa454d25642405f16d6d97d8a4d8bee6b50ac09f0133", "fileset_files": [ { "name": "00_contexto-proyecto.md", "size_bytes": 7852, "sha256": "8a9fece6701efefb4b891f20829d325dd17fa07ea70c66d3c2dfe47daee03592" }, { "name": "Protocolo_Actualizacion_Contextual.md", "size_bytes": 4119, "sha256": "10fff437f42752ec58cf598c851838e86f9e2f49f0503a5b5e6947a55a071d8e" }, { "name": "instrucciones.md", "size_bytes": 3171, "sha256": "da0ff00edb23f9d97fdb5cb4d1c7cae0ed82f081ee3d8bf236af1f864991c547" }, { "name": "Manual de operación del impactógrafo.pdf", "size_bytes": 770473, "sha256": "a560f983a817b687ede087fe89016a1d014137cd1af823b5915253341be80324" }, { "name": "YSD300AN.exe", "size_bytes": 4164102, "sha256": "04e59eae71226a3311094fd49ace7050ca7349083559556fa214bbd3a3f96464" }, { "name": "YSD300AN-P2406.exe", "size_bytes": 4721571, "sha256": "ae6beb2d87b8c2e5efa5aae670571104744519339ceedc952cc5b81c9138aace" }, { "name": "Hl-340.exe", "size_bytes": 224587, "sha256": "7d2f140da848ceda847b8f26f562fad473a30d6d86370783c7331ed223c6648f" } ], "tools_enabled": [ { "name": "web.run", "enabled": true, "notes": "browsing + citations", "version": null }, { "name": "python", "enabled": true, "version": "3.11.8" }, { "name": "python_user_visible", "enabled": true, "version": "3.11.8" }, { "name": "file_search", "enabled": true, "version": null }, { "name": "canmore", "enabled": true, "version": null }, { "name": "automations", "enabled": true, "version": null }, { "name": "gmail (read-only)", "enabled": true, "version": null }, { "name": "gcal (read-only)", "enabled": true, "version": null }, { "name": "gcontacts (read-only)", "enabled": true, "version": null }, { "name": "user_info", "enabled": true, "version": null }, { "name": "summary_reader", "enabled": true, "version": null }, { "name": "guardian_tool", "enabled": true, "version": null }, { "name": "container", "enabled": true, "version": null }, { "name": "image_gen", "enabled": true, "version": null }, { "name": "bio (memory)", "enabled": false, "version": null } ], "locale": "es-MX", "timezone": "America/Mexico_City", "current_datetime": null, "response_verbosity_target": 3, "chain_of_thought_visibility": "hidden", "async_work_policy": "no_background_tasks", "safety_filters": { "enabled": true, "details": null }, "other_generation_settings": { "beam_width": null, "logit_bias": null, "min_p": null, "mirostat": null, "stop_at_newline": null } } ```

*Salida (assistant):*

> ¡Listo! Aquí tienes un análisis claro y accionable del payload de configuración. # Resumen ejecutivo (AVCM) - **PI (Project Instructions):** `"Proyecto Ingeniería Inversa — Mandato operativo v2.1"` — presente y nombrado. - **CI (Custom Instructions, 3 campos):** **No visibles** en el payload → no auditables aquí. - **Memoria:** `bio (memory) = disabled` → coherente con política de trazabilidad explícita sin memoria mutable. - **Archivos cargados (fileset):** 7 artefactos con SHA-256 y tamaño; incluye 1 PDF y 3 ejecutables (2 versiones de YSD300AN y 1 driver HL-340). --- # Inventario puntual **Modelo & control:** - `model`: **GPT-5 Thinking**; `model_build`: **null** (sin build ID → afecta reproducibilidad). - Parámetros determinismo (**todos null**): `seed`, `temperature`, `top_p`, `top_k`, `max_tokens`, `*penalty` → correrá con defaults no versionados. - `stop_sequences`: vacío. - `chain_of_thought_visibility`: **hidden** (correcto). - `async_work_policy`: **no_background_tasks** (alineado al contrato “un turno = valor”). - `safety_filters.enabled`: **true**. **Contexto de ejecución:** - `locale`: `es-MX`; `timezone`: `America/Mexico_City` (coherente). - `current_datetime`: **null...

## Snippets de código / comandos
⚠️ FALTA: No se hallaron snippets de código/comandos.

## Checklists
- ⚠️ FALTA: No se detectaron checklists explícitas.

## Errores comunes y cómo evitarlos
- ⚠️ FALTA: No se documentaron errores comunes en las fuentes.

## Métricas o criterios de calidad
- ⚠️ FALTA: No se identificaron métricas/criterios de calidad explícitos.

## Apéndice: notas y decisiones de fusión
- Canonical: **5-56-17-_An_lisis_Config_** ← 5-56-17-_An_lisis_Config_(len=30575). Nota: Agrupación por similitud Jaccard de shingles (k=5).
- Canonical: **6-0-1-_Config_YSD_** ← 6-0-1-_Config_YSD_(len=21302). Nota: Agrupación por similitud Jaccard de shingles (k=5).

## Mapa de trazabilidad (este informe)

| archivo_original | formato | título/tema detectado | rol(es) relevantes | porción aprovechada (sí/no) | observaciones de deduplicación |
|---|---|---|---|---|---|
| 2025-9-29/5-56-17-_An_lisis_Config_.md | md | <Análisis Config> | assistant, system, user | sí |  |
| 2025-9-29/5-56-17-_An_lisis_Config_.json | json | <Análisis Config> | assistant, system, user | sí |  |
| 2025-9-29/6-0-1-_Config_YSD_.md | md | <Config YSD> | assistant, system, user | sí |  |
| 2025-9-29/6-0-1-_Config_YSD_.json | json | <Config YSD> | assistant, system, user | sí |  |